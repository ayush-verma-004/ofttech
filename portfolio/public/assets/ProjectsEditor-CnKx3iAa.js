import{r as a,a as o,j as e,B as n}from"./index-YngF7MCl.js";import{P as f}from"./plus-CUGnRd_t.js";import{P as v,T as N}from"./trash-2-D2hkBMle.js";import{A as w}from"./arrow-left-DsCqRUkg.js";const E=()=>{const[c,m]=a.useState([]),[i,l]=a.useState("LIST"),[b,h]=a.useState(null),[g,p]=a.useState(!0),x={title:"",industry:"",problem:"",solution:"",outcome:"",imageUrls:[]},[r,t]=a.useState(x);a.useEffect(()=>{u()},[]);const u=async()=>{try{const s=await o.get("/projects");m(s.data.data)}catch(s){console.error(s)}finally{p(!1)}},y=async s=>{s.preventDefault();try{i==="NEW"?await o.post("/projects",r):await o.put(`/projects/${b._id}`,r),await u(),l("LIST")}catch(d){alert("Failed: "+d.message)}},j=async s=>{if(window.confirm("Delete this case study?"))try{await o.delete(`/projects/${s}`),m(c.filter(d=>d._id!==s))}catch{alert("Error deleting project")}};return g?e.jsx("div",{children:"Loading..."}):i==="LIST"?e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center sticky top-0 bg-gray-50/95 backdrop-blur-sm z-10 py-4 border-b border-gray-200/50 mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Portfolio Projects"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage case studies."})]}),e.jsxs(n,{onClick:()=>{t(x),l("NEW")},variant:"primary",className:"flex items-center gap-2 shadow-lg shadow-primary/20 hover:shadow-primary/30 transform hover:-translate-y-0.5 transition-all",children:[e.jsx(f,{size:18})," Add Case Study"]})]}),e.jsx("div",{className:"grid gap-6",children:c.map(s=>e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs font-bold uppercase tracking-wider rounded",children:s.industry}),e.jsx("h3",{className:"font-bold text-lg text-primary",children:s.title})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm mt-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-bold text-gray-900 mb-1",children:"Problem"}),e.jsx("div",{className:"text-gray-600 line-clamp-2",children:s.problem})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("div",{className:"font-bold text-gray-900 mb-1",children:"Solution"}),e.jsx("div",{className:"text-gray-600 line-clamp-2",children:s.solution})]}),e.jsxs("div",{className:"bg-blue-50/50 p-3 rounded border border-blue-100",children:[e.jsx("div",{className:"font-bold text-secondary mb-1",children:"Outcome"}),e.jsx("div",{className:"text-gray-700 line-clamp-2",children:s.outcome})]})]})]}),e.jsxs("div",{className:"flex md:flex-col gap-2 justify-center border-t md:border-t-0 md:border-l border-gray-100 md:pl-6 pt-4 md:pt-0",children:[e.jsx("button",{onClick:()=>{t(s),h(s),l("EDIT")},className:"p-2 text-gray-400 hover:text-secondary border rounded-md hover:border-secondary transition-all",children:e.jsx(v,{size:18})}),e.jsx("button",{onClick:()=>j(s._id),className:"p-2 text-gray-400 hover:text-red-600 border rounded-md hover:border-red-600 transition-all",children:e.jsx(N,{size:18})})]})]},s._id))})]}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>l("LIST"),className:"flex items-center gap-2 text-gray-500 mb-6 hover:text-primary",children:[e.jsx(w,{size:18})," Back to Projects"]}),e.jsx("h2",{className:"text-xl font-bold mb-6",children:i==="NEW"?"New Case Study":"Edit Case Study"}),e.jsxs("form",{onSubmit:y,className:"bg-white p-8 rounded-xl shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Project Title"}),e.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",required:!0,value:r.title,onChange:s=>t({...r,title:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Industry"}),e.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",required:!0,value:r.industry,onChange:s=>t({...r,industry:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"The Problem"}),e.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg",required:!0,rows:3,value:r.problem,onChange:s=>t({...r,problem:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Our Solution"}),e.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg",required:!0,rows:3,value:r.solution,onChange:s=>t({...r,solution:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-secondary mb-1",children:"Business Outcome"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-secondary/30 rounded-lg bg-secondary/5",required:!0,rows:2,value:r.outcome,onChange:s=>t({...r,outcome:s.target.value})})]}),e.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[e.jsx(n,{type:"button",variant:"secondary",onClick:()=>l("LIST"),className:"bg-gray-100 text-gray-700",children:"Cancel"}),e.jsx(n,{type:"submit",variant:"primary",children:"Save Project"})]})]})]})};export{E as default};
