import{u as b,d as E,r as l,a as d,j as e,B as c}from"./index-D6a-1QXO.js";const y=()=>{const i=b(),{id:o}=E(),n=!!o,[r,t]=l.useState({username:"",password:"",role:"CO_FOUNDER",permissions:[]}),[u,m]=l.useState(n),x=["CAREER_CREATE","CAREER_UPDATE","CAREER_DELETE","PROJECT_CREATE","PROJECT_UPDATE","PROJECT_DELETE","SERVICE_UPDATE","ABOUT_UPDATE","TEAM_UPDATE","SETTINGS_UPDATE"];l.useEffect(()=>{n&&p()},[o]);const p=async()=>{try{const a=(await d.get(`/users/${o}`)).data.data;t({username:a.username,password:"",role:a.role,permissions:a.permissions||[]})}catch{alert("Failed to load user"),i("/admin/users")}finally{m(!1)}},g=async s=>{s.preventDefault();try{if(n){const a={...r};a.password||delete a.password,await d.put(`/users/${o}`,a)}else await d.post("/users",r);i("/admin/users")}catch(a){alert("Failed: "+(a.response?.data?.message||a.message))}},h=s=>{r.permissions.includes(s)?t({...r,permissions:r.permissions.filter(a=>a!==s)}):t({...r,permissions:[...r.permissions,s]})};return u?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:n?"Edit User":"Add New Team Member"}),e.jsxs("form",{onSubmit:g,className:"bg-white p-8 rounded-xl shadow-sm border border-gray-100 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent outline-none transition-all",value:r.username,onChange:s=>t({...r,username:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n?"New Password (leave blank to keep current)":"Password"}),e.jsx("input",{type:"password",required:!n,minLength:6,className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent outline-none transition-all",value:r.password,onChange:s=>t({...r,password:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent outline-none transition-all",value:r.role,onChange:s=>t({...r,role:s.target.value}),disabled:r.role==="SUPER_ADMIN",children:[e.jsx("option",{value:"SUPER_ADMIN",disabled:!0,children:"Super Admin (Founder)"}),e.jsx("option",{value:"CO_FOUNDER",children:"Co-Founder"}),e.jsx("option",{value:"HR_ADMIN",children:"HR Admin"}),e.jsx("option",{value:"CONTENT_MANAGER",children:"Content Manager"}),e.jsx("option",{value:"PROJECT_MANAGER",children:"Project Manager"})]}),r.role==="SUPER_ADMIN"&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Super Admin role cannot be changed."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.map(s=>e.jsxs("label",{className:"flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-secondary rounded border-gray-300 focus:ring-secondary",checked:r.permissions.includes(s),onChange:()=>h(s),disabled:r.role==="SUPER_ADMIN"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:s.replace(/_/g," ")})]},s))})]}),e.jsxs("div",{className:"pt-4 flex gap-4",children:[e.jsx(c,{type:"button",onClick:()=>i("/admin/users"),variant:"secondary",className:"flex-1 bg-gray-100 text-gray-700 hover:bg-gray-200",children:"Cancel"}),e.jsx(c,{type:"submit",variant:"primary",className:"flex-1",children:n?"Update User":"Create User"})]})]})]})};export{y as default};
