import{r,a as l,j as e,L as n,B as p}from"./index-D6a-1QXO.js";import{P as h}from"./plus-D3YzvhRM.js";import{P as y,T as g}from"./trash-2-Bzk-s_jk.js";const N=()=>{const[a,i]=r.useState([]),[d,c]=r.useState(!0);r.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await l.get("/users");i(s.data.data)}catch(s){console.error(s)}finally{c(!1)}},o=async s=>{if(window.confirm("Are you sure you want to remove this user?"))try{await l.delete(`/users/${s}`),i(a.filter(t=>t._id!==s))}catch{alert("Failed to delete user")}};return d?e.jsx("div",{children:"Loading users..."}):e.jsx("div",{children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4 sticky top-0 bg-gray-50/95 backdrop-blur-sm z-10 py-4 border-b border-gray-200/50",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage admin access and roles."})]}),e.jsx(n,{to:"/admin/users/new",children:e.jsxs(p,{variant:"primary",className:"flex items-center gap-2 shadow-lg shadow-primary/20 hover:shadow-primary/30 transform hover:-translate-y-0.5 transition-all",children:[e.jsx(h,{size:18})," Add New User"]})})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-secondary/10 flex items-center justify-center text-secondary font-bold text-xs mr-3",children:s.username[0].toUpperCase()}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.username})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.role==="SUPER_ADMIN"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:s.role.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.role==="SUPER_ADMIN"?e.jsx("span",{className:"text-xs text-gray-400 italic",children:"Full Access"}):s.permissions.slice(0,3).map((t,m)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:t.split("_")[0]},m)),s.permissions.length>3&&e.jsxs("span",{className:"text-xs text-gray-400",children:["+",s.permissions.length-3," more"]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx(n,{to:`/admin/users/${s._id}`,children:e.jsx("button",{className:"text-secondary hover:text-secondary-dark transition-colors",children:e.jsx(y,{size:18})})}),e.jsx("button",{onClick:()=>o(s._id),className:"text-red-500 hover:text-red-700 ml-4 disabled:opacity-30",disabled:s.role==="SUPER_ADMIN",children:e.jsx(g,{size:18})})]})]},s._id))})]})})]})})};export{N as default};
