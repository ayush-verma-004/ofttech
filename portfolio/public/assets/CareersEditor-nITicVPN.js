import{r as i,a as o,j as e,B as m}from"./index-YngF7MCl.js";import{P as E}from"./plus-CUGnRd_t.js";import{P as T,T as p}from"./trash-2-D2hkBMle.js";import{A as L}from"./arrow-left-DsCqRUkg.js";const J=()=>{const[d,x]=i.useState([]),[c,l]=i.useState("LIST"),[g,b]=i.useState(null),[y,j]=i.useState(!0),u={title:"",location:"",type:"Full-time",description:"",requirements:[""]},[s,a]=i.useState(u);i.useEffect(()=>{h()},[]);const h=async()=>{try{const t=await o.get("/careers");x(t.data.data)}catch(t){console.error(t)}finally{j(!1)}},f=()=>{a(u),l("NEW")},v=t=>{a(t),b(t),l("EDIT")},N=async t=>{if(window.confirm("Delete this job posting?"))try{await o.delete(`/careers/${t}`),x(d.filter(r=>r._id!==t))}catch(r){alert("Failed to delete: "+r.message)}},w=async t=>{t.preventDefault();try{c==="NEW"?await o.post("/careers",s):await o.put(`/careers/${g._id}`,s),await h(),l("LIST")}catch(r){alert("Operation failed: "+r.message)}},C=(t,r)=>{const n=[...s.requirements];n[t]=r,a({...s,requirements:n})},k=()=>a({...s,requirements:[...s.requirements,""]}),q=t=>{const r=s.requirements.filter((n,S)=>S!==t);a({...s,requirements:r})};return y?e.jsx("div",{children:"Loading..."}):c==="LIST"?e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center sticky top-0 bg-gray-50/95 backdrop-blur-sm z-10 py-4 border-b border-gray-200/50 mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Careers Management"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage open positions."})]}),e.jsxs(m,{onClick:f,variant:"primary",className:"flex items-center gap-2 shadow-lg shadow-primary/20 hover:shadow-primary/30 transform hover:-translate-y-0.5 transition-all",children:[e.jsx(E,{size:18})," Post Job"]})]}),e.jsxs("div",{className:"grid gap-4",children:[d.map(t=>e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-primary",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t.location," â€¢ ",t.type]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(t),className:"p-2 text-gray-400 hover:text-secondary border rounded-md hover:border-secondary transition-all",children:e.jsx(T,{size:18})}),e.jsx("button",{onClick:()=>N(t._id),className:"p-2 text-gray-400 hover:text-red-600 border rounded-md hover:border-red-600 transition-all",children:e.jsx(p,{size:18})})]})]},t._id)),d.length===0&&e.jsx("div",{className:"text-center text-gray-500 py-10",children:"No active job postings."})]})]}):e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("button",{onClick:()=>l("LIST"),className:"flex items-center gap-2 text-gray-500 mb-6 hover:text-primary",children:[e.jsx(L,{size:18})," Back to List"]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-6",children:c==="NEW"?"Create New Position":"Edit Position"}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Title"}),e.jsx("input",{required:!0,className:"w-full px-4 py-2 border rounded-lg",value:s.title,onChange:t=>a({...s,title:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{required:!0,className:"w-full px-4 py-2 border rounded-lg",value:s.location,onChange:t=>a({...s,location:t.target.value})})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg",value:s.type,onChange:t=>a({...s,type:t.target.value}),children:[e.jsx("option",{children:"Full-time"}),e.jsx("option",{children:"Contract"}),e.jsx("option",{children:"Remote"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{required:!0,rows:4,className:"w-full px-4 py-2 border rounded-lg",value:s.description,onChange:t=>a({...s,description:t.target.value})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements / Tech Stack"}),e.jsx("button",{type:"button",onClick:k,className:"text-xs text-secondary font-bold uppercase tracking-wider",children:"+ Add Item"})]}),e.jsx("div",{className:"space-y-2",children:s.requirements.map((t,r)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{className:"flex-1 px-3 py-2 border rounded-lg text-sm",value:t,onChange:n=>C(r,n.target.value),placeholder:"e.g. 5+ years Java experience"}),e.jsx("button",{type:"button",onClick:()=>q(r),className:"text-red-400 hover:text-red-600",children:e.jsx(p,{size:18})})]},r))})]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx(m,{type:"button",variant:"secondary",onClick:()=>l("LIST"),className:"bg-gray-100 text-gray-700",children:"Cancel"}),e.jsx(m,{type:"submit",variant:"primary",children:"Save Position"})]})]})]})]})};export{J as default};
