import{c as C,r as l,a as d,j as e,B as x}from"./index-YngF7MCl.js";import{P as L}from"./plus-CUGnRd_t.js";import{P as b,T}from"./trash-2-D2hkBMle.js";import{A as E}from"./arrow-left-DsCqRUkg.js";const M=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],U=C("upload",M),P=()=>{const[u,p]=l.useState([]),[c,i]=l.useState("LIST"),[f,j]=l.useState(null),[y,v]=l.useState(!0),n={name:"",role:"",bio:"",image:null,socials:{linkedin:"",twitter:"",email:""}},[a,r]=l.useState(n),[h,m]=l.useState("");l.useEffect(()=>{g()},[]);const g=async()=>{try{const s=await d.get("/members");p(s.data.data)}catch(s){console.error(s)}finally{v(!1)}},N=s=>{r({...n,name:s.name,role:s.role,bio:s.bio,socials:s.socials||n.socials}),m(s.imageUrl),j(s),i("EDIT")},w=s=>{const t=s.target.files[0];t&&(r({...a,image:t}),m(URL.createObjectURL(t)))},k=async s=>{s.preventDefault();const t=new FormData;t.append("name",a.name),t.append("role",a.role),t.append("bio",a.bio),t.append("socials",JSON.stringify(a.socials)),a.image&&t.append("image",a.image);try{const o={headers:{"Content-Type":"multipart/form-data"}};c==="NEW"?await d.post("/members",t,o):await d.put(`/members/${f._id}`,t,o),await g(),i("LIST")}catch(o){alert("Failed: "+(o.response?.data?.message||o.message))}},S=async s=>{if(window.confirm("Delete this team member?"))try{await d.delete(`/members/${s}`),p(u.filter(t=>t._id!==s))}catch{alert("Error deleting member")}};return y?e.jsx("div",{children:"Loading..."}):c==="LIST"?e.jsxs("div",{className:"space-y-6 relative",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center sticky top-0 bg-gray-50/95 backdrop-blur-sm z-10 py-4 border-b border-gray-200/50 mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),e.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Manage profiles and roles."})]}),e.jsxs(x,{onClick:()=>{r(n),m(""),i("NEW")},variant:"primary",className:"flex items-center gap-2 shadow-lg shadow-primary/20 hover:shadow-primary/30 transform hover:-translate-y-0.5 transition-all",children:[e.jsx(L,{size:18})," Add Member"]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-100 shadow-sm flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full mb-4 overflow-hidden border border-gray-200",children:s.imageUrl?e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400 font-bold",children:"No Img"})}),e.jsx("h3",{className:"font-bold text-lg mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-secondary font-bold uppercase tracking-wider mb-2",children:s.role}),e.jsx("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:s.bio}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N(s),className:"p-2 text-gray-400 hover:text-secondary border rounded-md transition-colors",children:e.jsx(b,{size:16})}),e.jsx("button",{onClick:()=>S(s._id),className:"p-2 text-gray-400 hover:text-red-600 border rounded-md transition-colors",children:e.jsx(T,{size:16})})]})]},s._id))})]}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("button",{onClick:()=>i("LIST"),className:"flex items-center gap-2 text-gray-500 mb-6 hover:text-primary",children:[e.jsx(E,{size:18})," Back to Team"]}),e.jsx("h2",{className:"text-xl font-bold mb-6",children:c==="NEW"?"New Team Member":"Edit Member"}),e.jsxs("form",{onSubmit:k,className:"bg-white p-8 rounded-xl shadow-sm border border-gray-100 space-y-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-100 border-2 border-gray-200 flex items-center justify-center",children:h?e.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Upload"})}),e.jsxs("label",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 rounded-full cursor-pointer transition-opacity text-white font-bold text-xs uppercase tracking-wider",children:[e.jsx(U,{size:20,className:"mb-1"}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:w})]}),e.jsx("div",{className:"absolute bottom-0 right-2 w-8 h-8 bg-secondary text-white rounded-full flex items-center justify-center border-2 border-white",children:e.jsx(b,{size:14})})]})}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Full Name"}),e.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",required:!0,value:a.name,onChange:s=>r({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Role / Job Title"}),e.jsx("input",{className:"w-full px-4 py-2 border rounded-lg",required:!0,value:a.role,onChange:s=>r({...a,role:s.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Bio"}),e.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg",required:!0,rows:3,value:a.bio,onChange:s=>r({...a,bio:s.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Social Links (Optional)"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[e.jsx("input",{placeholder:"LinkedIn URL",className:"px-3 py-2 border rounded text-sm",value:a.socials?.linkedin||"",onChange:s=>r({...a,socials:{...a.socials,linkedin:s.target.value}})}),e.jsx("input",{placeholder:"Twitter URL",className:"px-3 py-2 border rounded text-sm",value:a.socials?.twitter||"",onChange:s=>r({...a,socials:{...a.socials,twitter:s.target.value}})}),e.jsx("input",{placeholder:"Email Address",className:"px-3 py-2 border rounded text-sm",value:a.socials?.email||"",onChange:s=>r({...a,socials:{...a.socials,email:s.target.value}})})]})]}),e.jsxs("div",{className:"pt-4 flex gap-3 justify-end",children:[e.jsx(x,{type:"button",variant:"secondary",onClick:()=>i("LIST"),className:"bg-gray-100 text-gray-700",children:"Cancel"}),e.jsx(x,{type:"submit",variant:"primary",children:"Save Member"})]})]})]})};export{P as default};
